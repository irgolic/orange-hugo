{{ define "main"}}

<div id="bkgOverlay" class="backgroundOverlay"></div>

<div id="delayedPopup" class="delayedPopupWindow">
    <iframe src="http://mailtrain.biolab.si/subscription/JVS_UVh-8"></iframe>
</div>

<section id="features" class="features section downloads ">
        <div class="container downloados" style="margin-top: 50px;">
            <div class="row" style="padding: 0px !important;text-align: center;">
                <div class="dow" style="display: inline-block; width: 80%;">
                    {{ range .Site.Data.tabs}}
                    <div class="icon-item col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 text-center" >
                        <a onclick="windows({{.os}})" href="#{{.os}}">
                            <div id="{{.os}}1" class="icon">
                                <i class="fa fa-{{ .icon }} jsonly icon-button"></i>
                            </div><!--//icon-->
                            <h2 class="content title" style="margin:20px 0px !important;">{{ .title }}</h2>
                        </a>
                    </div><!--//item-->
                {{end}}
                </div>
            </div><!--//row-->
        </div><!--//container-->

        <div class="container" style="padding-bottom: 40px;">
            <div class="row col">
            <div id="win" class=" download-os">
                <div class="">
                    <div class="content">
                        <h2>Download the latest version for Windows</h2>
                        <a id="recommended-download-win" style="margin-top: 10px" class="btn btn-warning big-button-base download-button" href="https://service.biolab.si/download/orange?platform=win">
                            Download Orange
                        </a>

                        <h3><a id="standalone"></a>Standalone installer (default)</h3>
                        <a id="recommended-download" href="https://service.biolab.si/download/orange?platform=win"
                            class="download-button">Orange3-Miniconda-x86_64.exe
                            (64 bit)</a><br />
                        <p>Can be used without administrative priviledges.</p>
                        <h3><a id="anaconda"></a>Anaconda</h3>
                        <p>If you are using python provided by <a href="https://docs.conda.io/en/latest/miniconda.html">Anaconda</a>
                            distribution, you are almost ready to go. Add conda-forge to the list of channels you can install packages from</p>
                        <pre><code>conda config --add channels conda-forge</code></pre>
                        <p>and run</p>
                        <pre><code>conda install orange3</code></pre>

                        <h3><a id="pip"></a>Pip</h3>
                        <p>Orange can also be installed from the Python Package Index:</p>
                        <pre><code>pip install orange3</code></pre>

                        <h3>Installing add-ons</h3>
                        <p>Additional features can be added to Orange by installing add-ons. You can find add-on manager in Options menu.</p>

                        <h3>Download archive</h3>
                        <p>Download older versions from <a href="https://download.biolab.si/download/files/">our archive</a>.</p>

                    </div>
                </div>
            </div>
        </div>

            <div id="mac" class=" mac download-os">
                <div class="" >
                    <div class="content">
                        <h2>Download the latest version for Mac</h2>
                        <a id="recommended-download-mac" style="margin-top: 10px" class="btn btn-warning big-button-base download-button" href="https://service.biolab.si/download/orange?platform=mac">
                            Download Orange
                        </a>
                        
                        <h3><a id="standalone"></a>Bundle</h3>
                        <a id="recommended-download" class="download-button" href="https://service.biolab.si/download/orange?platform=mac">Orange.dmg</a><br/>
                        <p>A universal bundle with everything packed in and ready to use.</p>

                        <h3><a id="anaconda"></a>Anaconda</h3>
                        <p>If you are using python provided by <a href="https://docs.conda.io/en/latest/miniconda.html">Anaconda</a>
                            distribution, you are almost ready to go. Add conda-forge to the list of channels you can install packages from</p>
                        <pre><code>conda config --add channels conda-forge</code></pre>
                        <p>and run</p>
                        <pre><code>conda install orange3</code></pre>

                        <h3><a id="pip"></a>Pip</h3>
                        <p>Orange can also be installed from the Python Package Index:</p>
                        <pre><code>pip install orange3</code></pre>

                        <h3>Installing add-ons</h3>
                        <p>Additional features can be added to Orange by installing add-ons. You can find add-on manager in Options menu.</p>

                        <h3>Download archive</h3>
                        <p>Download older versions from <a href="https://download.biolab.si/download/files/">our archive</a>.</p>

                    </div>
                </div>
            </div>
    
        <div id="lin" class=" mac download-os">
                 <div class="" >
                   <div class="content">
                    <h2>Linux / Source</h2>

                    <h3><a id="anaconda"></a>Anaconda</h3>
                    <p>If you are using python provided by <a href="https://www.continuum.io/downloads">Anaconda</a>
                        distribution, you are almost ready to go. Add conda-forge to the list of channels you can install packages from</p>
                    <pre><code>conda config --add channels conda-forge</code></pre>
                    <p>and run</p>
                    <pre><code>conda install orange3</code></pre>
                    <pre><code>conda install -c defaults pyqt=5 qt</code></pre>
                    <p>(the second commands installs qt and pyqt from the defaults channel,
                        as those provided by the conda-forge do not include webkit)</p>

                    <h3><a id="pip"></a>Pip</h3>
                    <p>Orange can also be installed from the Python Package Index. You may need additional system packages provided by your distribution.</p>
                    <pre><code>pip install orange3</code></pre>

                    <h3>Installing from source</h3>
                    <p>Clone our repository from <a href="https://github.com/biolab/orange3">GitHub</a> or download
                        the <a href="https://github.com/biolab/orange3/archive/stable.tar.gz">source code tarball</a>.
                        Then follow the instructions in <a href="https://github.com/biolab/orange3/blob/stable/README.md">README.md</a>
                    </p>
                    <p>To run Orange Canvas run</p>
                    <pre><code>python -m Orange.canvas</code></pre>

                    <h3>Installing add-ons</h3>
                    <p>Additional features can be added to Orange by installing add-ons. You can find add-on manager in Options menu.</p>
                </div>
            </div>
        </div>

        </div>
        <script type="text/javascript">
            const Http = new XMLHttpRequest();
            const url='https://service.biolab.si/download/version';
            Http.open("GET", url+"?"+"domain=orange");
            Http.send();

            Http.onload = (e) => {
                try {
                  versions = JSON.parse(Http.responseText)
                }
                catch(err) {
                  versions = null
                }
                if (versions != null){
                    var win = document.getElementById("recommended-download-win");
                    win.textContent += versions.win;
                    var mac = document.getElementById("recommended-download-mac");
                    mac.textContent += versions.mac;
                }
            }
            hash = window.location.hash.substr(1);

            if (hash == ""){
                $("#mac").hide();
                $("#lin").hide();
                $("#win").hide();
                if (navigator.appVersion.indexOf("Win")!=-1) hash="windows";
                if (navigator.appVersion.indexOf("Mac")!=-1) hash="macos";
                if (navigator.appVersion.indexOf("X11")!=-1) hash="linux";
                if (navigator.appVersion.indexOf("Lin")!=-1) hash="linux";
            }
                        
            if (hash == "windows"){
                var element = document.getElementById("windows1");
                element.classList.add("icon-selected");
                $("#mac").hide();
                $("#lin").hide();
                $("#win").show();
                window.location.hash = hash;
            }

            else if( hash == "macos"){
                var element = document.getElementById("macos1");
                element.classList.add("icon-selected");
                window.location.hash = hash;
                    $("#win").hide();
                    $("#lin").hide();
                    $("#mac").show();
            }

            else if( hash == "linux"){
                var element = document.getElementById("linux1");
                element.classList.add("icon-selected");
                window.location.hash = hash;
                    $("#win").hide();
                    $("#mac").hide();
                    $("#lin").show();
            }

            function windows(os) {
                _removeClasses();
                if (os =="windows"){
                    var element = document.getElementById(os+"1");
                    element.classList.add("icon-selected");
                    $("#mac").hide();
                    $("#lin").hide();
                    $("#win").show();
                }
                else if( os == "macos"){
                    var element = document.getElementById(os+"1");
                    element.classList.add("icon-selected");
                    $("#win").hide();
                    $("#lin").hide();
                    $("#mac").show();
                }
                else if( os == "linux"){
                    var element = document.getElementById(os+"1");
                    element.classList.add("icon-selected");
                    $("#win").hide();
                    $("#mac").hide();
                    $("#lin").show();
                }
            }
        window.addEventListener('hashchange', function() {
            _removeClasses();
            hash = window.location.hash.substr(1);
            if (hash =="windows"){
                    var element = document.getElementById(hash+"1");
                    element.classList.add("icon-selected");
                    $("#mac").hide();
                    $("#lin").hide();
                    $("#win").show();
                }
            else if( hash == "macos"){
                var element = document.getElementById(hash+"1");
                element.classList.add("icon-selected");
                $("#win").hide();
                $("#lin").hide();
                $("#mac").show();
            }
            else if( hash == "linux"){
                var element = document.getElementById(hash+"1");
                element.classList.add("icon-selected");
                $("#win").hide();
                $("#mac").hide();
                $("#lin").show();
            }
        });

        function _removeClasses() {
          var els = document.querySelectorAll('.icon-selected');
          for (var i = 0; i < els.length; i++) {
            els[i].classList.remove('icon-selected');
          }
        }

        var popupShown = false;

        function showEmailCourse() {
            if (popupShown) {
                return
            }
            $("#bkgOverlay").delay(2800).fadeIn(200);
            $("#delayedPopup").delay(3000).fadeIn(200);
            popupShown = true
        }

        function hideEmailCourse() {
            $("#bkgOverlay").fadeOut(200);
            $("#delayedPopup").fadeOut(200);
        }

        $(document).ready(function () {
            $(".download-button").click(showEmailCourse);

            //close popup when clicking x or off popup
            $('#bkgOverlay').click(hideEmailCourse);

            //close popup when clicking the esc keyboard button
            $(document).keyup(function (event) {
                if (event.which == '27') {
                    hideEmailCourse();
                }
            });
        });
        </script>
    </section>


{{ end }}
